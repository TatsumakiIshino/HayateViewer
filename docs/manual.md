# HayateViewer 操作マニュアル

## 1. はじめに

HayateViewerは、快適な画像閲覧体験を提供するために開発された高機能画像ビューアです。特に、漫画やイラスト集などをストレスなく楽しむことに重点を置いています。

*   **サクサク動く:** 巨大なファイルでも、素早い読み込みとスムーズなページめくりを実現します。
*   **見開き表示:** まるで本を読んでいるかのように、2ページを並べて表示できます。左右の綴じ方向も設定可能です。
*   **書庫ファイルをそのまま開ける:** ZIP, RAR, 7zといった圧縮ファイルを解凍せずに、直接開いて閲覧できます。
*   **美しい拡大表示:** GPUの力を利用して、画像を拡大してもジャギー（ギザギザ）が目立たない、滑らかで美しい表示が可能です。

このマニュアルでは、HayateViewerの基本的な使い方から、便利な機能、設定のカスタマイズ方法までを分かりやすく解説します。

## 2. 基本的な使い方

### ファイルを開く
*   **ドラッグ＆ドロップ:** エクスプローラーなどから、ファイルやフォルダを直接ウィンドウにドラッグ＆ドロップして開くこともできます。

### ページの移動

*   **マウスホイール:** ホイールを上下に回転させることで、ページを前後に移動できます。
*   **キーボード:**
    *   `→` : 次のページ
    *   `←` : 前のページ
    *   `Home`: 最初のページ
    *   `End`: 最後のページ
*   **ページジャンプ:**
    *   `Shift+S`: 指定したページを直接指定して移動できます。
    *   `S`: シークバーを開きます。ウィンドウ下部にあるバーをドラッグして、直感的にページを移動することもできます。

## 3. 画面の操作

### キーボードでの操作

| キー | 機能 |
|:---|:---|
| `+` / `=` | 拡大 |
| `-` | 縮小 |
| `0` / `R` | ズームをリセット（全体表示） |
| `F` | 見開き表示のON/OFF |
| `B` | 綴じ方向の切り替え（左綴じ/右綴じ） |
| `ALT+ENTER` | フルスクリーン表示のON/OFF |
| `Q` | アプリケーションを終了 |
| `F1` | バージョン情報を表示 |
| `O` | オプション画面を開きます。 |

### マウスでの操作

*   **パン (表示位置の移動):**
    *   画像を拡大表示しているときに、マウスの **右ボタン** をドラッグすると、表示範囲を自由に動かせます。
*   **ルーペ (一時的な拡大):**
    *   マウスの **左ボタン** を押している間、カーソル位置が一時的に拡大されます。ボタンを離すと元の表示に戻ります。

## 4. 設定項目

HayateViewerの動作は、`config.json`というファイルを編集することで、より細かくカスタマイズできます。このファイルはテキストエディタで開いて編集してください。

| 設定項目 | 説明 | デフォルト値 |
|:---|:---|:---|
| `rendering_backend` | 描画エンジンを選択します。`"opengl"` はGPUを利用し高速・高画質です。`"pyside6_mt"` はCPUで描画し、互換性が高いです。 | `"pyside6_mt"` |
| `is_spread_view` | `true`で見開き表示、`false`で単一ページ表示になります。 | `true` |
| `binding_direction` | ページの綴じ方向を `left` (左綴じ) または `right` (右綴じ) で指定します。 | `"left"` |
| `spread_view_first_page_single` | 見開き表示のとき、1ページ目を単独で表示するかどうか。日本の漫画など、表紙を単独表示したい場合に `true` にします。 | `true` |
| `resampling_mode_gl` | `opengl`利用時の画質を選択します。<br>`"GL_NEAREST"`, `"GL_BILINEAR"`, `"GL_LANCZOS3"`, `"GL_LANCZOS4"`, `"GL_QUINTIC"` | `"GL_QUINTIC"` |
| `resampling_mode_cpu` | `pyside6_mt`利用時の画質を選択します。<br>`"PIL_NEAREST"`, `"PIL_BILINEAR"`, `"PIL_BICUBIC"`, `"PIL_LANCZOS"`, `"SKIMAGE_ORDER_0"` から `_5` まで | `"SKIMAGE_ORDER_5"` |
| `max_cache_size_mb` | 画像を一時的に保存しておくメモリ（CPUキャッシュ）の最大サイズをMB単位で指定します。 | `4096` |
| `cpu_max_prefetch_pages` | 次に表示する可能性のあるページを、何ページ先まで事前に読み込んでおくかを指定します。 | `10` |
| `gpu_max_prefetch_pages` | `opengl`利用時に、GPUメモリに事前にテクスチャを準備しておくページ数を指定します。 | `9` |
| `parallel_decoding_workers` | 画像のデコードを並列処理するワーカースレッドの数。`0`で自動設定。 | `8` |
| `show_status_bar_info` | ステータスバーにキャッシュページなどの詳細情報を表示するかどうか。 | `true` |

## 5. トラブルシューティング

*   **Q. 起動しない、またはエラーが出る。**
    *   A. `activate.bat` を実行して仮想環境を有効にしたか、`requirements.txt` に記載されたライブラリがすべてインストールされているか確認してください。

*   **Q. 書庫ファイルが開けない。**
    *   A. ファイルが破損しているか、対応していない形式の可能性があります。

*   **Q. 動作が遅い。**
    *   A. `config.json`の設定を見直してみてください。
        *   `rendering_backend` を `"pyside6_mt"` に変更してみる。
        *   `resampling_mode_gl` をより軽量なもの（例: `"GL_BILINEAR"`）に変更する。
        *   `max_cache_size_mb` や `cpu_max_prefetch_pages` の値を小さくする。
